<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="slider.css" />
  </head>
  <body>
    <div class="image-slider">
      <div class="slider-container">
        <img src="img/aBB2_1.jpg" alt="cookies" />
        <img src="img/aBB2_2.jpg" alt="croissants" />
        <img src="img/aBB2_3.jpg" alt="scrone" />
        <img src="img/aBB2_4.jpg" alt="danish" />
        <img src="img/aBB2_5.jpg" alt="danish closeup" />
        <img src="img/aBB2_6.jpg" alt="pasties display" />
        <img src="img/aBB2_7.jpg" alt="danish" />
        <img src="img/aBB2_10.jpg" alt="muffins" />
        <img src="img/aBB2_12.jpg" alt="chocolate Croissant" />
        <!-- Add more images here -->
      </div>
    </div>

    <script>
      const sliderContainer = document.querySelector(".slider-container");
      const images = document.querySelectorAll(".slider-container img");
      let isMouseDown = false;
      let startX = 0;
      let scrollLeft = 0;

      // Clone the first and last images to create a looping effect
      const firstImage = images[0].cloneNode(true);
      const lastImage = images[images.length - 1].cloneNode(true);
      sliderContainer.appendChild(firstImage);
      sliderContainer.insertBefore(lastImage, images[0]);

      // Adjust the initial scroll position to display the correct images
      sliderContainer.scrollLeft = 300; // Adjust this value based on your image width + margin

      // Handle mouse/touch start
      sliderContainer.addEventListener("mousedown", (e) => {
        isMouseDown = true;
        startX = e.pageX - sliderContainer.offsetLeft;
        scrollLeft = sliderContainer.scrollLeft;
      });

      sliderContainer.addEventListener("touchstart", (e) => {
        isMouseDown = true;
        startX = e.touches[0].pageX - sliderContainer.offsetLeft;
        scrollLeft = sliderContainer.scrollLeft;
      });

      // Handle mouse/touch move
      sliderContainer.addEventListener("mousemove", (e) => {
        if (!isMouseDown) return;
        e.preventDefault();
        const x = e.pageX - sliderContainer.offsetLeft;
        const walk = (x - startX) * 2;
        sliderContainer.scrollLeft = scrollLeft - walk;
      });

      sliderContainer.addEventListener("touchmove", (e) => {
        if (!isMouseDown) return;
        e.preventDefault();
        const x = e.touches[0].pageX - sliderContainer.offsetLeft;
        const walk = (x - startX) * 2;
        sliderContainer.scrollLeft = scrollLeft - walk;
      });

      // Handle mouse/touch end
      sliderContainer.addEventListener("mouseup", () => {
        isMouseDown = false;
        snapToCenter();
      });

      sliderContainer.addEventListener("touchend", () => {
        isMouseDown = false;
        snapToCenter();
      });

      // Function to snap the image to the center and loop if needed
      function snapToCenter() {
        const containerWidth = sliderContainer.offsetWidth;
        const imageWidth = images[0].offsetWidth + 10; // Account for the margin
        const scrollPosition = sliderContainer.scrollLeft;
        const index = Math.round(scrollPosition / imageWidth);
        const snapToPosition = index * imageWidth;

        // Looping logic: If we're at the first or last image, jump to the other side
        if (index <= 0) {
          sliderContainer.scrollTo({
            left: images.length * imageWidth, // Jump to the end
            behavior: "smooth",
          });
        } else if (index >= images.length) {
          sliderContainer.scrollTo({
            left: imageWidth, // Jump to the start
            behavior: "smooth",
          });
        } else {
          sliderContainer.scrollTo({
            left: snapToPosition,
            behavior: "smooth",
          });
        }
      }
    </script>
  </body>
</html>
